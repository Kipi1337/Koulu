<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Koearvosanat</title>
    <style>
        table {
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: center;
        }

        .results-box {
            margin-top: 8px;
            border: 1px solid black;
            padding: 8px;
            width: 500px;
        }
    </style>
</head>
<body>

<table>
    <thead>
    <tr>
        <th>Tehtävä 1</th>
        <th>Tehtävä 2</th>
        <th>Tehtävä 3</th>
        <th>Tehtävä 4</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td><input type="text" class="points" id="task1"></td>
        <td><input type="text" class="points" id="task2"></td>
        <td><input type="text" class="points" id="task3"></td>
        <td><input type="text" class="points" id="task4"></td>
    </tr>
    </tbody>
</table>

<div class="results-box">
    <p>Pistemäärä: <span id="resultTotal"></span></p>
    <p>Arvosana: <span id="resultGrade"></span></p>
</div>

<script>
    const pointsInputs = document.querySelectorAll('.points');
    const totalElement = document.getElementById('total');
    const gradeElement = document.getElementById('grade');
    const resultTotalElement = document.getElementById('resultTotal');
    const resultGradeElement = document.getElementById('resultGrade');

    pointsInputs.forEach(input => {
        input.addEventListener('blur', calculateTotalAndGrade);
    });

    function calculateTotalAndGrade() {
        let totalPoints = 0;
        let isError = false;

        pointsInputs.forEach(input => {
            const points = parseInt(input.value);

            if (isNaN(points) || points < 0 || points > 6) {
                isError = true;
                return;
            }

            totalPoints += points;
        });

        if (isError) {
            totalElement.textContent = 'VIRHE!';
            gradeElement.textContent = 'VIRHE!';
            resultTotalElement.textContent = '';
            resultGradeElement.textContent = '';
            return;
        }

        totalElement.textContent = totalPoints;

        let grade;

        if (totalPoints >= 0 && totalPoints <= 12) {
            grade = 0;
        } else if (totalPoints <= 15) {
            grade = 1;
        } else if (totalPoints <= 17) {
            grade = 2;
        } else if (totalPoints <= 19) {
            grade = 3;
        } else if (totalPoints <= 21) {
            grade = 4;
        } else {
            grade = 5;
        }

        gradeElement.textContent = grade;

        // Päivitä tulosten laatikko
        resultTotalElement.textContent = totalPoints;
        resultGradeElement.textContent = grade;
    }
</script>

</body>
</html>
